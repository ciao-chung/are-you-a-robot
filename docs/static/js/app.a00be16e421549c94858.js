webpackJsonp([1],{0:function(t,e,n){n("j1ja"),t.exports=n("NHnr")},"2QN9":function(t,e,n){"use strict";(function(t){var a=n("mvHQ"),i=n.n(a),o=n("Xxa5"),r=n.n(o),s=n("exGp"),c=n.n(s),u=n("2Pnh"),l=n.n(u),h=n("sJst"),p=n.n(h),f=n("GDE4"),d=n.n(f);e.a={data:function(){return{data:{title:trans("configure.title.default"),quantity:9}}},created:function(){this.init()},methods:{init:function(){this.sync()},sync:function(){this.$store.dispatch("recaptcha.set.data",this.data)},exportStart:function(){this.$root.$emit("exportStart"),this.$nextTick(this.exportAction)},exportAction:function(){var e=this;return c()(r.a.mark(function n(){var a,i,o;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=t('div[racaptha="root"]')[0],n.next=3,l()(a,{logging:!1});case 3:i=n.sent,o=i.toDataURL("image/jpeg",1),p()(o,trans("site.title")+".jpg","image/jpeg"),e.$nextTick(function(){e.$root.$emit("exportEnd")});case 7:case"end":return n.stop()}},n,e)}))()}},computed:{recaptcha:function(){return this.$store.getters.recaptcha}},watch:{data:{deep:!0,handler:function(){this.sync()}},recaptcha:{deep:!0,handler:function(){i()(this.recaptcha)!=i()(this.data)&&(this.data=this.recaptcha)}}},components:{VueSlider:d.a}}}).call(e,n("7t+N"))},6058:function(t,e){},"6WHl":function(t,e,n){"use strict";var a=n("8zoZ"),i={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{directives:[{name:"model",rawName:"v-model",value:t.link,expression:"link"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.link},on:{input:function(e){e.target.composing||(t.link=e.target.value)}}})},staticRenderFns:[]};var o=function(t){n("X7js")};n("VU/8")(a.a,i,!1,o,"data-v-46d1851c",null).exports},"88iK":function(t,e,n){"use strict";(function(t){var a=n("DAYN"),i=n.n(a),o=n("nRtj");e.a={data:function(){return{draggableOptions:{handle:".photo-container"},photos:null}},created:function(){this.init()},methods:{init:function(){var e=this,n=[];if(Array.isArray(this.photos)){var a=this.photos.length;n=t.extend(!0,[],this.photos);var i=Math.abs(this.quantity-a);if(a<this.quantity)for(var o=1;o<=i;o++)n.push(null);else n.splice(this.quantity,i)}else for(var r=1;r<=this.quantity;r++)n.push(null);this.photos=n,this.$nextTick(function(){e.$refs&&Array.isArray(e.$refs.BodyPhoto)&&e.$refs.BodyPhoto.forEach(function(t){t.setupHeight instanceof Function&&t.setupHeight()})})},updatePhoto:function(t){this.$set(this.photos,t.index,t.data)}},computed:{recaptcha:function(){return this.$store.getters.recaptcha},quantity:function(){return this.recaptcha.quantity}},watch:{quantity:function(){this.init()}},components:{Draggable:i.a,BodyPhoto:o.a}}}).call(e,n("7t+N"))},"8gWi":function(t,e){},"8zoZ":function(t,e,n){"use strict";(function(t){e.a={props:{data:{default:null}},data:function(){return{link:null}},mounted:function(){t(this.$el).focus()},watch:{link:function(){this.$emit("updateData",this.link)},data:function(){this.link=this.data}}}}).call(e,n("7t+N"))},CiDc:function(t,e){},MTnZ:function(t,e){},Mqx4:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),i=(n("K3J8"),n("dZhe")),o=n.n(i);a.a.use(o.a);var r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view"),this._v(" "),e("VueDialog")],1)},staticRenderFns:[]};var s=n("VU/8")({},r,!1,function(t){n("8gWi"),n("NazU"),n("XOxz"),n("6058")},null,null).exports,c=n("/ocq"),u={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{racaptha:"header"},domProps:{innerHTML:this._s(this.title)}})},staticRenderFns:[]};var l=n("VU/8")({computed:{recaptcha:function(){return this.$store.getters.recaptcha},title:function(){var t=this.recaptcha.title;return"string"!=typeof t?"":t.replace(/\n/g,"<br>")}}},u,!1,function(t){n("yGz8")},"data-v-40dd1818",null).exports,h=n("88iK"),p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.photos?n("Draggable",{attrs:{racaptha:"body",options:t.draggableOptions},model:{value:t.photos,callback:function(e){t.photos=e},expression:"photos"}},t._l(t.photos,function(e,a){return n("BodyPhoto",{key:"photo"+a,ref:"BodyPhoto",refInFor:!0,attrs:{quantity:t.quantity,photo:e,index:a},on:{updatePhoto:t.updatePhoto}})})):t._e()},staticRenderFns:[]};var f=function(t){n("ZHOG")},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{racaptha:"footer"}},[n("div",{staticClass:"left"},[t._m(0),t._v(" "),n("div",{staticClass:"report"},[t._v("\n      "+t._s(t._f("trans")("recaptcha.report"))+"\n    ")])]),t._v(" "),n("div",{staticClass:"right"},[n("button",{attrs:{theme:""}},[t._v("\n      "+t._s(t._f("trans")("recaptcha.verify"))+"\n    ")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icon"},[e("i",{staticClass:"fa fa-refresh"}),this._v(" "),e("i",{staticClass:"fa fa-headphones"}),this._v(" "),e("i",{staticClass:"fa fa-info-circle"})])}]};var v={components:{PartialHeader:l,PartialBody:n("VU/8")(h.a,p,!1,f,"data-v-71923cb1",null).exports,PartialFooter:n("VU/8")({},d,!1,function(t){n("CiDc")},"data-v-4eba9a2c",null).exports},computed:{recaptcha:function(){return this.$store.getters.recaptcha}}},g={render:function(){var t=this.$createElement,e=this._self._c||t;return this.recaptcha?e("div",{attrs:{racaptha:"root"}},[e("PartialHeader"),this._v(" "),e("PartialBody"),this._v(" "),e("PartialFooter")],1):this._e()},staticRenderFns:[]};var m=n("VU/8")(v,g,!1,function(t){n("uOxg")},"data-v-ffd822b6",null).exports,_=n("2QN9"),y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"configure"},[n("h1",[t._v(t._s(t._f("trans")("site.title")))]),t._v(" "),n("h5",{staticClass:"help"},[t._v(t._s(t._f("trans")("configure.help")))]),t._v(" "),n("div",{staticClass:"form",attrs:{quantity:""}},[n("label",[t._v(t._s(t._f("trans")("configure.quantity")))]),t._v(" "),n("VueSlider",{attrs:{data:[1,4,9,16]},model:{value:t.data.quantity,callback:function(e){t.$set(t.data,"quantity",e)},expression:"data.quantity"}})],1),t._v(" "),n("div",{staticClass:"form"},[n("label",[t._v(t._s(t._f("trans")("configure.title")))]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.title,expression:"data.title"}],staticClass:"form-control",domProps:{value:t.data.title},on:{input:function(e){e.target.composing||t.$set(t.data,"title",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"action"},[n("button",{attrs:{theme:""},on:{click:t.exportStart}},[n("i",{staticClass:"fa fa-download"}),t._v(" "),n("span",[t._v(t._s(t._f("trans")("action.export")))])])])])},staticRenderFns:[]};var w=function(t){n("hvrg")},x={components:{ComponentRecaptcha:m,ComponentConfigure:n("VU/8")(_.a,y,!1,w,"data-v-6ad7c2fd",null).exports}},$={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row",attrs:{page:"home"}},[e("div",{staticClass:"col-lg-3 col-md-3 col-sm-4 col-xs-12",attrs:{partial:""}},[e("ComponentRecaptcha")],1),this._v(" "),e("div",{staticClass:"col-lg-9 col-md-9 col-sm-8 col-xs-12",attrs:{partial:""}},[e("ComponentConfigure")],1)])},staticRenderFns:[]};var k=n("VU/8")(x,$,!1,function(t){n("UXea")},"data-v-bc0b4a40",null).exports;a.a.use(c.a);var b=new c.a({routes:[{path:"/",name:"home",component:k}]}),C=n("NYxO");a.a.use(C.a);var P,F=new C.a.Store({modules:{Recaptcha:{state:{data:null},mutations:{"recaptcha.set.data":function(t,e){t.data=e}},actions:{"recaptcha.set.data":function(t,e){t.commit("recaptcha.set.data",e)}},getters:{recaptcha:function(t){return t.data}}}}}),S=n("Zrlr"),q=n.n(S),N=n("wxAW"),R=n.n(N),U={zh_TW:{"site.title":"我不是機器人","configure.title":"標題文字 (支援HTML格式)","configure.title.default":"選取含有「???」的圖片","configure.link":"圖片連結","configure.link_help":"載入圖片連結","configure.help":"圖片建議長寬比為1:1","configure.quantity":"圖片數量","photo.crop":"編輯圖片","recaptcha.verify":"驗證","recaptcha.report":"回報問題","action.accept":"確定","action.dismiss":"取消","action.export":"匯出"},en_US:{"site.title":"Are you a robot?","configure.title":"Title (HTML supported)","configure.title.default":"Select all images with ...","configure.link":"Photo link","configure.link_help":"Import a photo link","configure.help":"The picture suggests an aspect ratio of 1:1","configure.quantity":"Photo quantity","photo.crop":"Photo Crop","recaptcha.verify":"Verify","recaptcha.report":"Report a problem","action.accept":"Accept","action.dismiss":"Dismiss","action.export":"Export Image"}},D="zh_TW",E=n("mvHQ"),H=n.n(E),B=function(){function t(){q()(this,t),this.cookie={},this.storageItemName="cookieStorage",this.init()}return R()(t,[{key:"init",value:function(){if(""!=document.cookie.trim()){var t=decodeURI(document.cookie).split(this.storageItemName+"=")[1];try{this.cookie=JSON.parse(t)}catch(t){this.cookie={}}}}},{key:"all",value:function(){return this.cookie}},{key:"get",value:function(t){!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(""==document.cookie.trim())return null;var e=this.cookie[t];return e||null}},{key:"set",value:function(t,e){this.cookie[t]=e,this._write()}},{key:"delete",value:function(t){delete this.cookie[t],this._write()}},{key:"_write",value:function(){document.cookie=this.storageItemName+"="+encodeURI(H()(this.cookie))}}]),t}(),I=function(){function t(){q()(this,t);var e=Math.random();try{window.localStorage.setItem(e,e),window.localStorage.removeItem(e),this.supportedLocalStorage=!0}catch(t){return void(this.supportedLocalStorage=!1)}}return R()(t,[{key:"all",value:function(){return window.localStorage}},{key:"get",value:function(t){try{var e=window.localStorage.getItem(t);return"string"!=typeof e?null:JSON.parse(e)}catch(t){return null}}},{key:"set",value:function(t,e){window.localStorage.setItem(t,H()(e))}},{key:"delete",value:function(t){window.localStorage.removeItem(t)}}]),t}(),L=(P=new I).supportedLocalStorage?P:new B,z=function(){function t(){var e=this;q()(this,t),this.lang=L.get("lang"),null==this.lang&&this._setDefaultLang();var n=navigator.language||navigator.userLanguage;L.set("locale",n.replace("-","_")),window.trans=function(t){return e.trans(t)},a.a.filter("trans",function(t){return e.trans(t)})}return R()(t,[{key:"trans",value:function(t){return t&&U[this.lang]&&U[this.lang][t]?U[this.lang][t]:t}},{key:"_setDefaultLang",value:function(){L.set("lang",D),this.lang=D}},{key:"getLang",value:function(){return this.lang}}]),t}();a.a.use(function(){return new z}),a.a.config.productionTip=!1,new a.a({el:"#app",router:b,store:F,components:{App:s},template:"<App/>"})},NazU:function(t,e){},UXea:function(t,e){},X7js:function(t,e){},XOxz:function(t,e){},ZHOG:function(t,e){},"dA+L":function(t,e,n){"use strict";(function(t){var a=n("5SB6");e.a={props:{data:{default:null},meta:{default:null}},data:function(){return{$photo:null,cropper:null}},mounted:function(){this.init()},methods:{init:function(){this.$photo=t(this.$el).find("img"),this.cropper=new a.a(this.$photo[0],{aspectRatio:1}),this.$emit("updateData",this.cropper)}}}}).call(e,n("7t+N"))},hvrg:function(t,e){},kpG4:function(t,e,n){"use strict";var a=n("dA+L"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return this.meta?e("div",{attrs:{"photo-crop-zone":""}},[e("img",{attrs:{src:this.meta.photo}})]):this._e()},staticRenderFns:[]};var o=function(t){n("yOH5"),n("MTnZ")},r=n("VU/8")(a.a,i,!1,o,"data-v-5d4a0a97",null);e.a=r.exports},nRtj:function(t,e,n){"use strict";var a=n("pUMr"),i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"photo-container",attrs:{quantity:t.quantity}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.editable,expression:"editable"}],staticClass:"control"},[t.photo?n("div",{staticClass:"remove-button",on:{click:function(e){e.stopPropagation(),t.updatePhoto(null)}}},[n("i",{staticClass:"fa fa-close"})]):t._e()]),t._v(" "),t.photo?n("img",{attrs:{src:t.photo}}):t._e(),t._v(" "),t.photo?t._e():n("div",{directives:[{name:"show",rawName:"v-show",value:t.editable,expression:"editable"}],staticClass:"action"},[n("label",{attrs:{title:t._f("trans")("configure.photo_help")},on:{keydown:function(t){t.preventDefault()}}},[n("i",{staticClass:"fa fa-image"}),t._v(" "),n("input",{attrs:{type:"file"}})])])])},staticRenderFns:[]};var o=function(t){n("Mqx4")},r=n("VU/8")(a.a,i,!1,o,"data-v-1b2b0a06",null);e.a=r.exports},pUMr:function(t,e,n){"use strict";(function(t){n("6WHl");var a=n("kpG4");e.a={props:{quantity:{type:Number},photo:{default:function(){return null}},index:{type:Number}},data:function(){return{$FileBrowser:null,width:600,editable:!0}},beforeDestroy:function(){this.$root.$off("exportStart"),this.$root.$off("exportEnd")},created:function(){var t=this;this.$root.$on("exportStart",function(){return t.editable=!1}),this.$root.$on("exportEnd",function(){return t.editable=!0})},mounted:function(){var e=this;this.setupHeight(),this.setupFileBrowser(),t(window).resize(function(){e.setupHeight()})},methods:{setupPhotoSize:function(){var e=this,n=new Image;n.src=this.photo,n.onload=function(){var n=t(e.$el).find("img");this.width>this.height?n.css({width:"auto",height:"100%"}):n.css({width:"100%",height:"auto"})}},setupHeight:function(){var e=t(this.$el).width();t(this.$el).height(e)},setupFileBrowser:function(){var e=this;this.$FileBrowser=null,this.$nextTick(function(){e.$FileBrowser=t(e.$el).find('input[type="file"]'),e.$FileBrowser.val(""),e.$FileBrowser.change(function(t){e.handleFile(t.target.files),e.$FileBrowser.val("")})})},handleFile:function(t){if(t instanceof FileList&&t[0]instanceof File){var e=t[0],n=new FileReader,a=this;n.onload=function(t){a.createImagePreview(t.target.result)},n.readAsDataURL(e)}},createImagePreview:function(t){var e=this,n=document.createElement("img");n.src=t,n.onload=function(){var t=Math.min(e.width,n.width),a=n.height*(t/n.width),i=document.createElement("canvas"),o=i.getContext("2d");i.width=t,i.height=a,o.drawImage(n,0,0,t,a);var r=i.toDataURL("image/png");e.openPhotoCropDialog(r)}},openPhotoCropDialog:function(t){this.$dialog({size:"lg",title:trans("photo.crop"),component:a.a,meta:{photo:t},accept:{commitOnEnter:!0,label:trans("action.accept"),callback:this.cropPhoto}})},cropPhoto:function(t){var e=t.getCroppedCanvas().toDataURL("image/png");this.updatePhoto(e),this.$nextTick(function(){return t.destroy()})},updatePhoto:function(t){this.$emit("updatePhoto",{index:this.index,data:t})}},watch:{photo:function(){this.setupFileBrowser(),this.setupPhotoSize()}}}}).call(e,n("7t+N"))},uOxg:function(t,e){},yGz8:function(t,e){},yOH5:function(t,e){}},[0]);
//# sourceMappingURL=app.a00be16e421549c94858.js.map